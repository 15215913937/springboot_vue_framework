"use strict";(self["webpackChunkspringboot_vue_shenqn"]=self["webpackChunkspringboot_vue_shenqn"]||[]).push([[219],{219:function(e,a,t){t.r(a),t.d(a,{default:function(){return y}});var l=t(6252);const n={style:{padding:"10px"}},i={style:{margin:"10px 0"}},s=(0,l.Uk)("  上传文件 "),o={style:{margin:"10px 0",display:"block",clear:"both"}},r=(0,l.Uk)("查询"),d=(0,l.Uk)("重置"),u=(0,l.Uk)("  批量删除 "),p=(0,l.Uk)("下载"),c=(0,l.Uk)("   删除 "),h={style:{margin:"10px 0"}};function m(e,a,t,m,g,f){const w=(0,l.up)("CirclePlus"),b=(0,l.up)("el-icon"),C=(0,l.up)("el-button"),W=(0,l.up)("el-upload"),y=(0,l.up)("el-input"),_=(0,l.up)("Delete"),S=(0,l.up)("el-popconfirm"),k=(0,l.up)("el-table-column"),v=(0,l.up)("el-switch"),z=(0,l.up)("Remove"),U=(0,l.up)("el-pagination"),x=(0,l.up)("el-table"),D=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("div",i,[(0,l.Wm)(W,{action:"http://"+g.serverIp+":9090/files/testUpload","show-file-list":!1,"on-success":f.handleFileUploadSuccess,style:{display:"inline"}},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{type:"primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w)])),_:1}),s])),_:1})])),_:1},8,["action","on-success"])]),(0,l._)("div",o,[(0,l.Wm)(y,{modelValue:g.name,"onUpdate:modelValue":a[0]||(a[0]=e=>g.name=e),placeholder:"请输入文件名称",style:{width:"15%"},class:"mr-10","prefix-icon":m.Search,clearable:""},null,8,["modelValue","prefix-icon"]),(0,l.Wm)(C,{class:"mb-10",type:"primary",onClick:f.load},{default:(0,l.w5)((()=>[r])),_:1},8,["onClick"]),(0,l.Wm)(C,{class:"mb-10",type:"primary",onClick:f.reset},{default:(0,l.w5)((()=>[d])),_:1},8,["onClick"]),(0,l.Wm)(S,{title:"你确定要删除吗",onConfirm:f.deleteBatch},{reference:(0,l.w5)((()=>[(0,l.Wm)(C,{type:"danger",style:{float:"right","margin-right":"10px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_)])),_:1}),u])),_:1})])),_:1},8,["onConfirm"])]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(x,{data:g.tableData,border:"",stripe:"",style:{width:"100%"},onSelectionChange:f.handleSelectionChange},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{type:"selection",width:"55"}),(0,l.Wm)(k,{prop:"id",label:"ID",sortable:""}),(0,l.Wm)(k,{prop:"name",label:"文件名称"}),(0,l.Wm)(k,{prop:"type",label:"类型"}),(0,l.Wm)(k,{prop:"size",label:"文件大小（kb）"}),(0,l.Wm)(k,{label:"下载"},{default:(0,l.w5)((e=>[(0,l.Wm)(C,{type:"primary",onClick:a=>f.download(e.row.url)},{default:(0,l.w5)((()=>[p])),_:2},1032,["onClick"])])),_:1}),(0,l.Wm)(k,{label:"启用"},{default:(0,l.w5)((e=>[(0,l.Wm)(v,{modelValue:e.row.enable,"onUpdate:modelValue":a=>e.row.enable=a,"active-color":"#13ce66","inactive-color":"#ccc",onChange:a=>f.changeEnable(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,l.Wm)(k,{fixed:"right",label:"操作",width:"150px"},{default:(0,l.w5)((e=>[(0,l.Wm)(S,{title:"你确定要删除吗?",onConfirm:a=>f.handleDelete(e.row)},{reference:(0,l.w5)((()=>[(0,l.Wm)(C,{type:"danger"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(z)])),_:1}),c])),_:1})])),_:2},1032,["onConfirm"])])),_:1}),(0,l.Wm)(U,{small:"",layout:"prev, pager, next",total:50})])),_:1},8,["data","onSelectionChange"])),[[D,e.loading]]),(0,l._)("div",h,[(0,l.Wm)(U,{currentPage:g.currentPage,"onUpdate:currentPage":a[1]||(a[1]=e=>g.currentPage=e),"page-size":g.pageSize,"onUpdate:page-size":a[2]||(a[2]=e=>g.pageSize=e),"page-sizes":[10,20,50],small:e.small,disabled:e.disabled,background:e.background,layout:"total, sizes, prev, pager, next, jumper",total:g.total,onSizeChange:f.handleSizeChange,onCurrentChange:f.handleCurrentChange},null,8,["currentPage","page-size","small","disabled","background","total","onSizeChange","onCurrentChange"])])])}var g=t(4471),f=t(5781),w=t(2618),b={name:"File",data(){return{name:"",currentPage:1,pageSize:10,total:10,tableData:[],multipleSelection:[],serverIp:w.I}},created(){let e=sessionStorage.getItem("user")||"{}";this.user=JSON.parse(e),g.Z.get("/user/"+this.user.id).then((e=>{"0"===e.code&&(this.user=e.data)})),this.load()},setup(){return{Search:f.Search}},methods:{changeEnable(e){g.Z.post("/files/update",e).then((e=>{"0"===e.code&&this.load()}))},download(e){window.open(e)},deleteBatch(){this.ids.length?g.Z.post("/files/deleteBatch",this.ids).then((e=>{"0"===e.code?(this.$message.success("批量删除成功"),this.load()):this.$message.error(e.msg)})):this.$message.warning("请选择要删除文件")},handleSelectionChange(e){this.ids=e.map((e=>e.id))},fileUploadSuccess(e){this.form.cover=e.data},reset(){this.name="",this.load()},load(){g.Z.get("/files",{params:{pageNum:this.currentPage,pageSize:this.pageSize,name:this.name}}).then((e=>{this.tableData=e.data.records,this.total=e.data.total}))},handleDelete(e){this.id=e.id,g.Z["delete"]("/files/"+this.id).then((e=>{"0"===e.code?this.$message.success("删除成功"):this.$message.error(e.msg),this.load()}))},handleSizeChange(){this.load()},handleCurrentChange(){this.load()},handleFileUploadSuccess(e){this.load()}}},C=t(3744);const W=(0,C.Z)(b,[["render",m]]);var y=W}}]);
//# sourceMappingURL=219.22ca998d.js.map